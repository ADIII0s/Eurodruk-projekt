<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8">
  <title>Panel użytkownika – usterki</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    :root{
      --bg:#151a23;
      --panel:#1f2735;
      --panel-soft:#1b2230;
      --panel-deep:#141a24;
      --panel-light:#232e40;
      --muted:#c2ccd6;
      --text:#f3f7fd;
      --accent:#33c3ff;
      --accent-2:#7a7cff;
      --warn:#ffb020;
      --ok:#44e0a2;
      --border:1px solid rgba(255,255,255,.14);
      --shadow:0 18px 40px rgba(0,0,0,.5),0 1px 0 rgba(255,255,255,.05) inset;
    }

    *{box-sizing:border-box;margin:0;padding:0}
    body{
      font:16px/1.55 "Segoe UI",system-ui,-apple-system,BlinkMacSystemFont,"Roboto",sans-serif;
      background:radial-gradient(120% 180% at 0% 0%,#1a2130 0%,var(--bg) 40%,#05070b 100%);
      color:var(--text);
      min-height:100vh;
    }

    .container{
      max-width:1320px;
      margin:0 auto;
      padding:28px 18px 40px;
    }

    h1{
      font-size:26px;
      letter-spacing:.06em;
      text-transform:uppercase;
      margin-bottom:6px;
      color:#e4ecf8;
    }
    .page-subtitle{
      color:var(--muted);
      margin-bottom:22px;
    }

    .main-panel{
      background:radial-gradient(140% 200% at 0% 0%,#202b3f 0%,var(--panel-soft) 40%,var(--panel-deep) 100%);
      border-radius:30px;
      border:var(--border);
      box-shadow:var(--shadow);
      padding:20px 22px 24px;
    }

    /* GÓRNY PASEK – FORMULARZ */
    .ticket-header{
      display:grid;
      grid-template-columns:190px minmax(0,160px) minmax(0,260px) minmax(0,1fr);
      gap:12px;
      margin-bottom:22px;
      align-items:stretch;
    }
    @media(max-width:980px){
      .ticket-header{
        grid-template-columns:1fr 1fr;
      }
    }
    @media(max-width:640px){
      .ticket-header{
        grid-template-columns:1fr;
      }
    }

    .btn-main{
      border-radius:999px;
      border:none;
      cursor:pointer;
      font-weight:600;
      text-transform:uppercase;
      letter-spacing:.08em;
      font-size:13px;
      background:linear-gradient(100deg,var(--accent),var(--accent-2));
      color:#05070b;
      box-shadow:0 10px 25px rgba(0,0,0,.45);
      padding:14px 18px;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:8px;
    }
    .btn-main span.icon{
      font-size:18px;
      line-height:1;
    }

    .field{
      position:relative;
    }
    .field input{
      width:100%;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.22);
      background:rgba(10,12,18,.85);
      color:var(--text);
      padding:13px 15px;
      font-size:15px;
      outline:none;
      transition:border .15s,background .15s,box-shadow .15s;
    }
    .field input::placeholder{
      color:rgba(194,204,214,.65);
    }
    .field input:focus{
      border-color:rgba(51,195,255,.9);
      box-shadow:0 0 0 1px rgba(51,195,255,.5);
      background:rgba(15,21,32,.98);
    }
    .field label{
      position:absolute;
      left:16px;
      top:5px;
      font-size:11px;
      text-transform:uppercase;
      letter-spacing:.08em;
      color:rgba(194,204,214,.85);
      pointer-events:none;
    }
    .field input{
      padding-top:26px;
    }

    /* LISTA USTEREK */
    .section-title-row{
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:12px;
      gap:12px;
    }
    .section-title-row h2{
      font-size:16px;
      color:#e0e9f8;
    }
    .section-title-row span{
      font-size:13px;
      color:var(--muted);
    }

    .ticket-list{
      display:flex;
      flex-direction:column;
      gap:10px;
      max-height:430px;
      overflow:auto;
      padding-right:4px;
    }

    .ticket-row{
      display:grid;
      grid-template-columns:130px minmax(0,270px) minmax(0,1fr) 120px;
      gap:10px;
      padding:12px 14px;
      border-radius:18px;
      border:1px solid rgba(255,255,255,.09);
      background:rgba(13,18,27,.9);
      cursor:pointer;
      text-align:left;
      transition:background .15s,border .15s,transform .12s;
    }
    .ticket-row:nth-child(odd){
      background:rgba(20,27,39,.98);
    }
    .ticket-row:hover{
      border-color:rgba(51,195,255,.55);
      background:rgba(25,35,50,1);
      transform:translateY(-1px);
    }
    .ticket-row.selected{
      border-color:rgba(51,195,255,.9);
      box-shadow:0 0 0 1px rgba(51,195,255,.5);
    }

    .cell-label{
      font-size:11px;
      text-transform:uppercase;
      letter-spacing:.08em;
      color:rgba(194,204,214,.72);
      margin-bottom:2px;
    }
    .cell-main{
      font-size:15px;
    }
    .cell-sub{
      font-size:13px;
      color:var(--muted);
      margin-top:2px;
    }

    .code-main{
      font-weight:600;
      font-size:16px;
    }
    .code-sub{
      font-size:12px;
      color:var(--muted);
    }

    .status-badge{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      border-radius:999px;
      padding:7px 16px;
      font-size:12px;
      text-transform:uppercase;
      letter-spacing:.08em;
      border:1px solid transparent;
      min-width:96px;
    }
    .status-open{
      border-color:rgba(255,176,32,.45);
      background:rgba(255,176,32,.12);
      color:#ffd893;
    }
    .status-progress{
      border-color:rgba(122,124,255,.45);
      background:rgba(122,124,255,.13);
      color:#d6d7ff;
    }
    .status-closed{
      border-color:rgba(61,220,151,.45);
      background:rgba(61,220,151,.13);
      color:#a4f3d4;
    }

    /* DÓŁ – PAGER + BUTTON */
    .bottom-row{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:16px;
      margin-top:18px;
    }
    .dots{
      display:flex;
      gap:8px;
      align-items:center;
    }
    .dot{
      width:6px;
      height:6px;
      border-radius:999px;
      background:rgba(255,255,255,.18);
    }
    .dot.active{
      width:18px;
      background:#ffffff;
    }

    .btn-secondary-full{
      flex:1;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.22);
      background:rgba(12,16,24,.98);
      color:var(--text);
      padding:13px 20px;
      cursor:pointer;
      font-size:14px;
      text-align:center;
      box-shadow:0 10px 25px rgba(0,0,0,.45);
    }
    .btn-secondary-full:hover{
      border-color:rgba(51,195,255,.7);
      background:rgba(18,24,36,1);
    }

    /* MODAL */
    .dialog-backdrop{
      position:fixed;
      inset:0;
      background:rgba(0,0,0,.82);
      display:none;
      align-items:center;
      justify-content:center;
      z-index:1000;
    }
    .dialog-backdrop.show{display:flex;}

    .dialog{
      width:min(900px,96vw);
      background:radial-gradient(140% 200% at 0% 0%,#242f43 0%,#151b27 35%,#0b0f18 100%);
      border-radius:26px;
      border:1px solid rgba(255,255,255,.16);
      box-shadow:0 32px 60px rgba(0,0,0,.75);
      padding:18px 20px 18px;
      color:var(--text);
    }
    .dialog header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:10px;
    }
    .dialog-title{
      font-size:18px;
      font-weight:600;
    }
    .dialog-close{
      border:none;
      background:transparent;
      color:var(--muted);
      font-size:22px;
      cursor:pointer;
      line-height:1;
    }

    .dialog-location{
      margin-bottom:14px;
      font-size:14px;
    }
    .dialog-location span.label{
      display:inline-block;
      margin-right:6px;
      font-weight:600;
    }
    .dialog-location span.chip{
      display:inline-flex;
      align-items:center;
      border-radius:999px;
      padding:5px 12px;
      font-size:13px;
      background:rgba(15,23,36,.95);
      border:1px solid rgba(255,255,255,.16);
    }

    .dialog-body{
      display:grid;
      grid-template-columns:minmax(0,2.1fr) minmax(0,1.3fr);
      gap:16px;
    }
    @media(max-width:820px){
      .dialog-body{
        grid-template-columns:1fr;
      }
    }

    .tabs{
      display:flex;
      gap:8px;
      margin-bottom:10px;
    }
    .tabs button{
      flex:1;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.18);
      background:rgba(11,16,25,1);
      color:var(--muted);
      padding:8px 10px;
      font-size:13px;
      cursor:pointer;
    }
    .tabs button.active{
      background:linear-gradient(100deg,var(--accent),var(--accent-2));
      color:#05070b;
      border:none;
    }

    .dialog-textbox{
      border-radius:18px;
      background:rgba(6,9,15,.95);
      border:1px solid rgba(255,255,255,.15);
      padding:12px 14px;
      font-size:14px;
      min-height:190px;
      white-space:pre-wrap;
    }

    .dialog-gallery{
      border-radius:20px;
      background:rgba(10,14,22,.95);
      border:1px solid rgba(255,255,255,.15);
      padding:10px;
      display:flex;
      flex-direction:column;
      gap:10px;
      max-height:260px;
    }
    .dialog-gallery-inner{
      display:flex;
      gap:8px;
      overflow-x:auto;
    }
    .dialog-gallery img{
      display:block;
      width:160px;
      height:220px;
      object-fit:cover;
      border-radius:16px;
    }
    .dialog-gallery-label{
      font-size:12px;
      color:var(--muted);
    }
  </style>
</head>
<body>
<div class="container">
  <h1>Panel użytkownika</h1>
  <p class="page-subtitle">Dodaj zgłoszenie usterki i podglądaj ostatnie problemy zgłoszone w drukarni.</p>

  <section class="main-panel">
    <!-- GÓRNY PASEK -->
    <div class="ticket-header">
      <button class="btn-main" type="button">
        <span class="icon">＋</span>
        <span>Zgłoś usterkę</span>
      </button>

      <div class="field">
        <label for="f-code">Kod błędu</label>
        <input id="f-code" type="text" placeholder="np. E42">
      </div>

      <div class="field">
        <label for="f-loc">Lokalizacja na maszynie</label>
        <input id="f-loc" type="text" placeholder="np. Agregat czarny góra">
      </div>

      <div class="field">
        <label for="f-desc">Opis</label>
        <input id="f-desc" type="text" placeholder="Krótki opis zdarzenia">
      </div>
    </div>

    <!-- LISTA USTEREK -->
    <div class="section-title-row">
      <div>
        <h2>Ostatnie usterki.</h2>
        <span>Wybierz zgłoszenie, aby sprawdzić szczegóły.</span>
      </div>
    </div>

    <div class="ticket-list" id="ticketList">
      <!-- wiersz 1 -->
      <button class="ticket-row selected"
              data-title="KBA C818 — sekcja 3"
              data-code="E42"
              data-place="KBA C818 → Sekcja 3 → Kod: E42"
              data-operator="Podczas startu sekcji 3 pojawia się błąd E42. Wstęga nie rusza z odwijaka. Po skasowaniu błąd wraca."
              data-service="Sprawdzenie czujników rejestru. Wymiana uszkodzonego enkodera na odwijaku. Kalibracja modułu sterującego. Testy OK – błąd nie wraca."
              data-status="otwarte">
        <div>
          <div class="cell-label">Kod</div>
          <div class="cell-main code-main">E42</div>
          <div class="code-sub">12:04</div>
        </div>

        <div>
          <div class="cell-label">Maszyna</div>
          <div class="cell-main">KBA C818 — sekcja 3</div>
          <div class="cell-sub">Linia 1</div>
        </div>

        <div>
          <div class="cell-label">Opis</div>
          <div class="cell-main">Brak rejestru, zatrzymanie po kilku sekundach…</div>
          <div class="cell-sub">Operator: J.D.</div>
        </div>

        <div style="display:flex;align-items:center;justify-content:flex-end;">
          <span class="status-badge status-open">otwarte</span>
        </div>
      </button>

      <!-- wiersz 2 -->
      <button class="ticket-row"
              data-title="Lithoman IV — sekcja 5"
              data-code="S12"
              data-place="Lithoman IV → Sekcja 5 → Kod: S12"
              data-operator="Alarm S12 – przegrzanie modułu sterującego. Błąd pojawia się cyklicznie co kilka minut, po skasowaniu wraca podczas pracy."
              data-service="Wyczyszczenie szafy sterowniczej, sprawdzenie pracy wentylatorów. Wymiana jednego z wentylatorów chłodzenia modułu. Monitoring temperatur – wartości w normie."
              data-status="w toku">
        <div>
          <div class="cell-label">Kod</div>
          <div class="cell-main code-main">S12</div>
          <div class="code-sub">11:20</div>
        </div>

        <div>
          <div class="cell-label">Maszyna</div>
          <div class="cell-main">Lithoman IV — sekcja 5</div>
          <div class="cell-sub">Linia 2</div>
        </div>

        <div>
          <div class="cell-label">Opis</div>
          <div class="cell-main">Przegrzanie modułu sterującego, alarm okresowy.</div>
          <div class="cell-sub">Operator: L.B.</div>
        </div>

        <div style="display:flex;align-items:center;justify-content:flex-end;">
          <span class="status-badge status-progress">w toku</span>
        </div>
      </button>

      <!-- wiersz 3 -->
      <button class="ticket-row"
              data-title="Sprężarkownia — Atlas Copco"
              data-code="—"
              data-place="Sprężarkownia → Atlas Copco"
              data-operator="Niski poziom oleju na sprężarce. Poziom na granicy minimum, widoczny ślad oleju pod maszyną."
              data-service="Dolewka oleju według zaleceń producenta. Sprawdzenie szczelności instalacji – brak aktywnych wycieków. Zaplanowana dodatkowa kontrola za 48 h."
              data-status="zamknięte">
        <div>
          <div class="cell-label">Kod</div>
          <div class="cell-main code-main">—</div>
          <div class="code-sub">10:05</div>
        </div>

        <div>
          <div class="cell-label">Maszyna</div>
          <div class="cell-main">Sprężarkownia — Atlas Copco</div>
          <div class="cell-sub">Linia 3</div>
        </div>

        <div>
          <div class="cell-label">Opis</div>
          <div class="cell-main">Niski poziom oleju. Sprawdzić szczelność.</div>
          <div class="cell-sub">Operator: T.S.</div>
        </div>

        <div style="display:flex;align-items:center;justify-content:flex-end;">
          <span class="status-badge status-closed">zamknięte</span>
        </div>
      </button>
    </div>

    <!-- DÓŁ -->
    <div class="bottom-row">
      <div class="dots">
        <div class="dot active"></div>
        <div class="dot"></div>
        <div class="dot"></div>
      </div>
      <button class="btn-secondary-full" type="button" id="detailsBtn">
        Sprawdź szczegóły usterki.
      </button>
    </div>
  </section>
</div>

<!-- MODAL -->
<div class="dialog-backdrop" id="dialog">
  <div class="dialog" role="dialog" aria-modal="true">
    <header>
      <div class="dialog-title" id="dlgTitle">Szczegóły zgłoszenia</div>
      <button class="dialog-close" type="button" id="dlgClose" aria-label="Zamknij">×</button>
    </header>

    <div class="dialog-location">
      <span class="label">Miejsce:</span>
      <span class="chip" id="dlgPlace">KBA C818 → Sekcja 3 → Kod: E42</span>
    </div>

    <div class="dialog-body">
      <div>
        <div class="tabs">
          <button type="button" class="active" data-tab="op">Opis operatora</button>
          <button type="button" data-tab="serv">Co zrobił serwisant</button>
        </div>
        <div class="dialog-textbox" id="dlgText">
          <!-- tekst ustawiany z JS -->
        </div>
      </div>

      <div class="dialog-gallery">
        <div class="dialog-gallery-label">Zdjęcia z usterki</div>
        <div class="dialog-gallery-inner">
          <!-- możesz tu podmienić na własne ścieżki -->
          <img src="https://images.pexels.com/photos/34092/pexels-photo.jpg?auto=compress&cs=tinysrgb&w=800" alt="">
          <img src="https://images.pexels.com/photos/34088/pexels-photo.jpg?auto=compress&cs=tinysrgb&w=800" alt="">
          <img src="https://images.pexels.com/photos/34077/pexels-photo.jpg?auto=compress&cs=tinysrgb&w=800" alt="">
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  const ticketList = document.getElementById('ticketList');
  const dialog = document.getElementById('dialog');
  const dlgTitle = document.getElementById('dlgTitle');
  const dlgPlace = document.getElementById('dlgPlace');
  const dlgText = document.getElementById('dlgText');
  const detailsBtn = document.getElementById('detailsBtn');
  const closeBtn = document.getElementById('dlgClose');
  const tabButtons = document.querySelectorAll('.tabs button');

  let currentTicket = ticketList.querySelector('.ticket-row.selected');
  let currentTab = 'op';

  function setSelected(ticket){
    if(currentTicket) currentTicket.classList.remove('selected');
    currentTicket = ticket;
    if(currentTicket) currentTicket.classList.add('selected');
  }

  function openDialog(){
    if(!currentTicket) return;
    const title = currentTicket.dataset.title;
    const code = currentTicket.dataset.code;
    const place = currentTicket.dataset.place;
    const opText = currentTicket.dataset.operator || '';
    const servText = currentTicket.dataset.service || '';

    dlgTitle.textContent = title;
    dlgPlace.textContent = place;
    dlgText.textContent = currentTab === 'op' ? opText : servText;

    dialog.classList.add('show');
  }

  function closeDialog(){
    dialog.classList.remove('show');
  }

  ticketList.addEventListener('click', e=>{
    const row = e.target.closest('.ticket-row');
    if(!row) return;
    setSelected(row);
  });

  detailsBtn.addEventListener('click', openDialog);
  closeBtn.addEventListener('click', closeDialog);
  dialog.addEventListener('click', e=>{
    if(e.target === dialog) closeDialog();
  });

  tabButtons.forEach(btn=>{
    btn.addEventListener('click', ()=>{
      if(btn.classList.contains('active')) return;
      tabButtons.forEach(b=>b.classList.remove('active'));
      btn.classList.add('active');
      currentTab = btn.dataset.tab;

      if(!currentTicket) return;
      dlgText.textContent =
        currentTab === 'op'
          ? (currentTicket.dataset.operator || '')
          : (currentTicket.dataset.service || '');
    });
  });

  // domyślnie – ustaw tekst dla pierwszej wybranej usterki
  if(currentTicket){
    dlgText.textContent = currentTicket.dataset.operator || '';
  }
</script>
</body>
</html>
