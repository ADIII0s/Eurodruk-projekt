<!doctype html>
<html lang="pl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Panel użytkownika – usterki</title>
<style>
:root {
  --bg:#151a23; --panel:#1f2735; --panel-2:#181f2b;
  --muted:#c2ccd6; --text:#f3f7fd;
  --accent:#33c3ff; --accent-2:#7a7cff;
  --ok:#44e0a2; --warn:#ffb020;
  --border:1px solid rgba(255,255,255,.12);
  --shadow:0 14px 30px rgba(0,0,0,.38), 0 1px 0 rgba(255,255,255,.05) inset;
}
*{box-sizing:border-box}
body{
  margin:0;
  font:15px/1.55 "Segoe UI", system-ui, -apple-system, BlinkMacSystemFont, "Roboto", sans-serif;
  background:linear-gradient(180deg,#0f131b 0%, var(--bg) 100%);
  color:var(--text);
}

h1{margin:0 0 12px;font-size:24px;letter-spacing:.03em;text-transform:uppercase;color:#dce6f2}
h2{margin:0 0 10px;font-size:16px;color:#d9e7f6}
p{margin:0}

.container{max-width:1400px;margin:0 auto;padding:28px}
.grid-2{display:grid;grid-template-columns:1fr 1fr;gap:22px}
@media(max-width:1050px){.grid-2{grid-template-columns:1fr}}

.page-panel{
  background:radial-gradient(120% 120% at 0% 0%, #1a2130 0%, var(--panel) 45%, var(--panel-2) 100%);
  border:var(--border);
  border-radius:26px;
  box-shadow:var(--shadow);
  padding:22px;
}

form.ticket-form{display:grid;gap:16px}
.ticket-form input,
.ticket-form textarea{
  width:100%;
  padding:12px 14px;
  border-radius:18px;
  border:1px solid rgba(255,255,255,.22);
  background:rgba(255,255,255,.04);
  color:inherit;
}
.ticket-form textarea{min-height:140px;resize:vertical}

.segment-field{display:flex;flex-direction:column;gap:6px}
.segment-label{font-size:13px;color:var(--muted)}
.segment-picker{position:relative}
.segment-trigger{
  width:100%;
  text-align:left;
  border-radius:18px;
  padding:12px 16px;
  border:1px solid rgba(255,255,255,.22);
  background:rgba(255,255,255,.04);
  color:var(--text);
  display:flex;
  justify-content:space-between;
  align-items:center;
  cursor:pointer;
}
.segment-menu{
  position:absolute;left:0;right:0;top:calc(100% + 6px);
  background:var(--panel);border:var(--border);border-radius:18px;box-shadow:var(--shadow);
  padding:8px;display:none;z-index:50;max-height:320px;overflow:auto;
}
.segment-picker.open .segment-menu{display:grid;gap:6px}
.segment-option,.segment-menu button{width:100%;text-align:left;border:none;padding:10px 12px;border-radius:12px;background:rgba(255,255,255,.04);color:var(--text);cursor:pointer}
.segment-option:hover,.segment-menu button:hover{background:rgba(255,255,255,.08)}
.segment-option.has-sub{position:relative;padding-right:80px}
.segment-option .segment-submenu{position:absolute;right:8px;top:50%;transform:translateY(-50%);display:none;gap:6px}
.segment-option.has-sub:hover .segment-submenu{display:flex}
.segment-option .segment-submenu button{width:auto;padding:8px 10px;border:1px solid rgba(255,255,255,.18);background:rgba(255,255,255,.08)}

.table-list{display:flex;flex-direction:column;gap:10px}
.ticket-card{
  padding:16px 18px;
  border-radius:18px;
  border:1px solid rgba(255,255,255,.12);
  background:rgba(255,255,255,.04);
  display:grid;
  gap:8px;
  text-align:left;
  cursor:pointer;
}
.ticket-card:hover{outline:1px solid rgba(51,195,255,.25)}
.ticket-card__meta{color:var(--muted);font-size:12px}
.status-pill{
  display:inline-flex;align-items:center;justify-content:center;
  border-radius:999px;padding:4px 10px;font-size:12px;text-transform:uppercase;letter-spacing:.08em;
}
.status-open{border:1px solid rgba(255,176,32,.35);color:#ffd18a;background:rgba(255,176,32,.12)}
.status-closed{border:1px solid rgba(61,220,151,.35);color:#a3f3d3;background:rgba(61,220,151,.12)}
.status-progress{border:1px solid rgba(122,124,255,.35);color:#cdd1ff;background:rgba(122,124,255,.12)}

.action-row{display:flex;gap:12px;flex-wrap:wrap}
.action-row button{border-radius:999px;padding:12px 22px;border:1px solid rgba(255,255,255,.22);background:rgba(255,255,255,.08);color:var(--text);cursor:pointer}
.action-row .primary{border:none;background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#0f1216;font-weight:600}

.empty-state{color:var(--muted);padding:10px 0;text-align:center}
.toast{margin-top:12px;padding:10px 12px;border-radius:12px;background:rgba(61,220,151,.15);border:1px solid rgba(61,220,151,.35);color:#a3f3d3}

.dialog-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.75);display:none;align-items:center;justify-content:center;z-index:1200}
.dialog-backdrop.show{display:flex}
.dialog{width:min(680px,95vw);background:var(--panel);border:var(--border);border-radius:24px;padding:20px;box-shadow:0 30px 60px rgba(0,0,0,.6)}
.dialog header{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}
.dialog header h3{margin:0}
.dialog button{cursor:pointer}
</style>
</head>
<body>
  <div class="container">
    <h1>Panel użytkownika</h1>
    <p style="color:var(--muted);margin-bottom:18px">Dodaj zgłoszenie usterki i podglądaj ostatnie problemy zgłoszone w drukarni.</p>

    <div class="grid-2">
      <section class="page-panel">
        <h2>Zgłoś usterkę</h2>
        <p class="empty-state" style="text-align:left;padding:0 0 6px">Uzupełnij pola, a serwis natychmiast otrzyma informację o problemie.</p>
        <form class="ticket-form" action="#" method="post">
          <input type="text" name="title" placeholder="Tytuł zgłoszenia" required>
          <div class="grid-2">
            <input type="text" name="code" placeholder="Kod błędu">
            <input type="text" name="machine" placeholder="Maszyna" required>
          </div>
          <div class="grid-2">
            <input type="text" name="line" placeholder="Linia" required>
            <div class="segment-field">
              <label class="segment-label">Segment na maszynie</label>
              <div class="segment-picker" id="seg-picker">
                <button type="button" class="segment-trigger" onclick="toggleMenu(event)">
                  <span id="seg-value">Wybierz segment</span>
                  <span aria-hidden="true">▾</span>
                </button>
                <div class="segment-menu" id="seg-menu">
                  <button type="button" onclick="selectSegment('')">Wyczyść wybór</button>
                  <button class="segment-option" type="button" onclick="selectSegment('Odwijak')">Odwijak</button>
                  <div class="segment-option has-sub" onclick="event.stopPropagation()">
                    <span>Agregat czarny</span>
                    <div class="segment-submenu">
                      <button type="button" onclick="selectSegment('Agregat czarny, góra')">Góra</button>
                      <button type="button" onclick="selectSegment('Agregat czarny, dół')">Dół</button>
                    </div>
                  </div>
                  <button class="segment-option" type="button" onclick="selectSegment('Suszarka')">Suszarka</button>
                  <button class="segment-option" type="button" onclick="selectSegment('Cięcie wstęgi')">Cięcie wstęgi</button>
                  <button class="segment-option" type="button" onclick="selectSegment('Zszywarka')">Zszywarka</button>
                </div>
              </div>
            </div>
          </div>
          <input type="text" name="operator" placeholder="Operator" required>
          <textarea name="description" placeholder="Opis" required></textarea>
          <div class="action-row">
            <button class="primary" type="submit">Zgłoś usterkę</button>
            <button type="reset">Wyczyść</button>
          </div>
        </form>
        <div class="toast" style="display:none" id="success">Zgłoszenie zapisane</div>
      </section>

      <section class="page-panel">
        <h2>Ostatnie zgłoszenia</h2>
        <div class="table-list">
          <button class="ticket-card" onclick="openDialog('E42', 'KBA C818 — sekcja 3', 'Brak rejestru, zatrzymanie po kilku sekundach…', 'Linia 1', 'Operator: J.D.', 'otwarte')">
            <div class="ticket-card__meta">12.04 12:04 • KBA C818 • Linia 1</div>
            <strong>Brak rejestru, zatrzymanie po kilku sekundach…</strong>
            <p>Operator: J.D.</p>
            <span class="status-pill status-open">Otwarte</span>
          </button>
          <button class="ticket-card" onclick="openDialog('S12', 'Lithoman IV — sekcja 5', 'Przegrzanie modułu sterującego, alarm okresowy.', 'Linia 2', 'Operator: L.B.', 'w toku')">
            <div class="ticket-card__meta">12.04 11:20 • Lithoman IV • Linia 2</div>
            <strong>Przegrzanie modułu sterującego</strong>
            <p>Operator: L.B.</p>
            <span class="status-pill status-progress">W toku</span>
          </button>
          <button class="ticket-card" onclick="openDialog('—', 'Sprężarkownia — Atlas Copco', 'Niski poziom oleju. Sprawdzić szczelność.', 'Linia 3', 'Operator: T.S.', 'zamknięte')">
            <div class="ticket-card__meta">12.04 10:05 • Sprężarkownia • Linia 3</div>
            <strong>Niski poziom oleju</strong>
            <p>Operator: T.S.</p>
            <span class="status-pill status-closed">Zamknięte</span>
          </button>
        </div>
      </section>
    </div>
  </div>

  <div class="dialog-backdrop" id="dialog">
    <div class="dialog">
      <header>
        <h3 id="d-title"></h3>
        <button onclick="closeDialog()" aria-label="Zamknij">×</button>
      </header>
      <p><strong>Kod:</strong> <span id="d-code"></span></p>
      <p><strong>Opis:</strong> <span id="d-desc"></span></p>
      <p><strong>Linia:</strong> <span id="d-line"></span></p>
      <p><strong>Status:</strong> <span id="d-status"></span></p>
    </div>
  </div>

<script>
const picker=document.getElementById('seg-picker');
const menu=document.getElementById('seg-menu');
const value=document.getElementById('seg-value');
function toggleMenu(e){e.preventDefault();picker.classList.toggle('open')}
function selectSegment(v){value.textContent=v||'Wybierz segment';picker.classList.remove('open')}
document.addEventListener('click',e=>{if(!picker.contains(e.target))picker.classList.remove('open')});

function openDialog(code,title,desc,line,operator,status){
  document.getElementById('d-title').textContent=title;
  document.getElementById('d-code').textContent=code;
  document.getElementById('d-desc').textContent=`${desc} (${operator})`;
  document.getElementById('d-line').textContent=line;
  document.getElementById('d-status').textContent=status;
  document.getElementById('dialog').classList.add('show');
}
function closeDialog(){document.getElementById('dialog').classList.remove('show')}
</script>
</body>
</html>
